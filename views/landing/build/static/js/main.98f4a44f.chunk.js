(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n(2),a=n.n(c),o=n(14),i=n.n(o),r=(n(25),n(4)),l=n(15),u=n(16),h=n(19),p=n(18),d=(n(26),n(5)),j=n.n(d),m=n(17),g=n.n(m),b=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).onChange=function(t){switch(document.getElementById("blah2").src=URL.createObjectURL(t.target.files[0]),t.target.name){case"selectedFile":e.setState({selectedFile:t.target.files[0]});break;default:e.setState(Object(r.a)({},t.target.name,t.target.value))}e.setState({uploadPrompt:!1}),e.setState({profilePicUploaded:!0})},e.onSubmit=function(e){e.preventDefault()},e.state={loginOpen:!0,loginCred:{username:"",pass:""},newAcc:{username:"",age:0,proper_name:"",pass:"",pass_repeat:"",bio:"",location:"",job:"",school:"",sin_alch:!1,sin_nicc:!1,sin_weed:!1},description:"",selectedFile:"",uploadPrompt:!1},e}return Object(u.a)(n,[{key:"getCookie",value:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2];console.log("--could not find cookie---")}},{key:"setCookies",value:function(e,t,n){var s=new Date;s.setTime(s.getTime()+864e5),document.cookie="user_id="+e+";expires="+s.toUTCString(),document.cookie="token="+t+";expires="+s.toUTCString(),document.cookie="google_key="+n+";expires="+s.toUTCString()}},{key:"updateForms",value:function(e,t){var n=this.state[e];n[t.target.name]=t.target.value,this.setState(Object(r.a)({},e,n)),console.log(t.target.value)}},{key:"login",value:function(){var e=this,t={username:this.state.loginCred.username,password:this.state.loginCred.pass};j.a.ajax({type:"POST",url:"/auth/login",data:JSON.stringify(t),contentType:"application/json; charset=utf-8",success:function(t){e.setCookies(t.user_id,t.token,t.google_key),console.log("Login Successful"),window.location.href="/dashboard/firesides"},error:function(e){console.log("error:"),console.log(e)}})}},{key:"checkSignup",value:function(e){return""!==e.username&&(""!==e.password&&e.password==e.passwordRepeat&&(0!=e.age&&(""!=e.proper_name&&0!=this.state.profilePicUploaded)))}},{key:"signUp",value:function(){var e=this,t={username:this.state.newAcc.username,password:this.state.newAcc.pass,passwordRepeat:this.state.newAcc.pass_repeat,age:this.state.newAcc.age,proper_name:this.state.newAcc.proper_name,bio:this.state.newAcc.bio,location:this.state.newAcc.location,school:this.state.newAcc.school,job:this.state.newAcc.job,sin_weed:this.state.newAcc.sin_weed?1:0,sin_alch:this.state.newAcc.sin_alch?1:0,sin_nicc:this.state.newAcc.sin_nicc?1:0};this.checkSignup(t)?j.a.ajax({type:"POST",url:"/auth/signup",data:JSON.stringify(t),contentType:"application/json; charset=utf-8",success:function(n){if("user created"==n.msg){var s=e.state.loginCred;s.username=t.username,s.pass=t.password,e.setCookies(n.insertId,"");var c=e.state,a=c.description,o=c.selectedFile,i=new FormData;i.append("description",a),i.append("selectedFile",o),g.a.post("/uploadProfilePic",i).then((function(t){e.setState({loginOpen:!0}),e.setState({loginCred:s})}))}},error:function(e){console.log("error:"),console.log(e)}}):alert("Check your signup form. Something important is missing.")}},{key:"handleCheckboxs",value:function(e){var t=this.state.newAcc;t[e.target.name]=e.target.checked,this.setState({newAcc:t})}},{key:"toggleUploadPrompt",value:function(){1==this.state.uploadPrompt?this.setState({uploadPrompt:!1}):this.setState({uploadPrompt:!0})}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)("h1",{children:"FireSide"}),Object(s.jsx)("h3",{children:"Attend or host local FireSides"}),Object(s.jsx)("div",{id:"poopy",children:this.state.loginOpen?Object(s.jsxs)("div",{className:"formContainer",children:[Object(s.jsx)("h2",{children:"Login"}),Object(s.jsxs)("form",{children:[Object(s.jsx)("input",{name:"username",value:this.state.loginCred.username,onChange:function(t){e.updateForms("loginCred",t)},placeholder:"Username"}),Object(s.jsx)("input",{type:"password",name:"pass",value:this.state.loginCred.pass,onChange:function(t){e.updateForms("loginCred",t)},placeholder:"Password"}),Object(s.jsx)("h3",{className:"fauxButton",onClick:function(){e.login()},children:"Login"})]}),Object(s.jsx)("h3",{className:"fauxButton",onClick:function(){e.setState({loginOpen:!1})},children:"Create Account"})]}):Object(s.jsxs)("div",{className:"formContainer",children:[Object(s.jsx)("h2",{children:"Create Account"}),Object(s.jsx)("p",{children:"Choose wisely. Top 5 fields cannot be changed."}),Object(s.jsxs)("div",{children:[Object(s.jsx)("button",{id:"profilePicUploadButton",onClick:function(){e.toggleUploadPrompt()},children:"Change Profile Pic"}),this.state.uploadPrompt?Object(s.jsx)("div",{id:"uploadPrompt",children:Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsx)("button",{onClick:function(){e.toggleUploadPrompt()},children:" Cancel "}),Object(s.jsx)("input",{type:"file",name:"selectedFile",accept:"image/*",onChange:this.onChange})]})}):null]}),Object(s.jsx)("img",{id:"blah2"}),Object(s.jsxs)("form",{id:"createAccountForm",onSubmit:!0,children:[Object(s.jsx)("input",{name:"username",value:this.state.newAcc.username,onChange:function(t){e.updateForms("newAcc",t)},placeholder:"Unique Username"}),Object(s.jsx)("input",{name:"proper_name",value:this.state.newAcc.proper_name,onChange:function(t){e.updateForms("newAcc",t)},placeholder:"Your proper name"}),Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Age"}),Object(s.jsx)("input",{type:"number",name:"age",value:this.state.newAcc.age,onChange:function(t){e.updateForms("newAcc",t)},placeholder:"Age"})]}),Object(s.jsx)("input",{name:"pass",value:this.state.newAcc.pass,onChange:function(t){e.updateForms("newAcc",t)},placeholder:"Password"}),Object(s.jsx)("input",{name:"pass_repeat",value:this.state.newAcc.pass_repeat,onChange:function(t){e.updateForms("newAcc",t)},placeholder:"Repeat Password"}),Object(s.jsx)("textarea",{id:"editBio",rows:"10",cols:"20",name:"bio",placeholder:"Biography",value:this.state.bio,onChange:function(t){e.updateForms("newAcc",t)}}),Object(s.jsx)("input",{type:"text",name:"location",placeholder:"Location",value:this.state.location,onChange:function(t){e.updateForms("newAcc",t)}}),Object(s.jsx)("input",{type:"text",name:"job",placeholder:"Job",value:this.state.job,onChange:function(t){e.updateForms("newAcc",t)}}),Object(s.jsx)("input",{type:"text",name:"school",placeholder:"School",value:this.state.school,onChange:function(t){e.updateForms("newAcc",t)}}),Object(s.jsx)("h3",{children:"Sins"}),Object(s.jsxs)("div",{className:"sinOption",children:[Object(s.jsx)("h3",{children:"That sticky icky icky"}),Object(s.jsx)("input",{type:"checkbox",name:"sin_weed",checked:this.state.newAcc.sin_weed,onClick:function(t){e.handleCheckboxs(t)}})]}),Object(s.jsxs)("div",{className:"sinOption",children:[Object(s.jsx)("h3",{children:"Bottles *clink*"}),Object(s.jsx)("input",{type:"checkbox",name:"sin_alch",checked:this.state.newAcc.sin_alch,onClick:function(t){e.handleCheckboxs(t)}})]}),Object(s.jsxs)("div",{className:"sinOption",children:[Object(s.jsx)("h3",{children:"Ciggys *cringe*"}),Object(s.jsx)("input",{type:"checkbox",name:"sin_nicc",checked:this.state.newAcc.sin_nicc,onClick:function(t){e.handleCheckboxs(t)}})]}),Object(s.jsx)("h3",{className:"fauxButton",onClick:function(){e.signUp()},children:"Create"})]}),Object(s.jsx)("h3",{className:"fauxButton",onClick:function(){e.setState({loginOpen:!0})},children:"Already a user?"})]})})]})}}]),n}(a.a.Component),f=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),s(e),c(e),a(e),o(e)}))};i.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(b,{})}),document.getElementById("root")),f()}},[[45,1,2]]]);
//# sourceMappingURL=main.98f4a44f.chunk.js.map