(this["webpackJsonpdashboard2.0"]=this["webpackJsonpdashboard2.0"]||[]).push([[0],{175:function(e,t,i){},397:function(e,t,i){"use strict";i.r(t);var s=i(1),n=i.n(s),o=i(33),c=i.n(o),r=i(6),a=i(7),l=i(9),d=i(8),u=(i(175),i(18)),h=i(25),j=i(40),f=i(77),p=i.n(f),b=i(2),g=i.n(b),v=i(0),O=function(e){Object(l.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(r.a)(this,i),(s=t.call(this,e)).onChange=function(e){switch(document.getElementById("blah").src=URL.createObjectURL(e.target.files[0]),e.target.name){case"selectedFile":s.setState({selectedFile:e.target.files[0]});break;default:s.setState(Object(j.a)({},e.target.name,e.target.value))}},s.onSubmit=function(e){e.preventDefault();var t=s.state,i=t.description,n=t.selectedFile,o=new FormData;o.append("description",i),o.append("selectedFile",n),p.a.post("/uploadFile",o).then((function(e){console.log(e),s.props.refresh(!0),s.setState({uploadPrompt:!1})}))},s.state={description:"",selectedFile:"",uploadPrompt:!1},s}return Object(a.a)(i,[{key:"getCookie",value:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2];console.log("--could not find cookie---")}},{key:"toggleUploadPrompt",value:function(){1==this.state.uploadPrompt?this.setState({uploadPrompt:!1}):this.setState({uploadPrompt:!0})}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{id:"uploadPromptButton",onClick:function(){e.toggleUploadPrompt()},children:"+"}),this.state.uploadPrompt?Object(v.jsxs)("div",{id:"uploadPrompt",children:[Object(v.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(v.jsx)("button",{onClick:function(){e.toggleUploadPrompt()},children:" Cancel "}),Object(v.jsx)("input",{type:"file",name:"selectedFile",accept:"image/*",onChange:this.onChange}),Object(v.jsx)("button",{type:"submit",children:"Submit"})]}),Object(v.jsx)("img",{id:"blah"})]}):null]})}}]),i}(s.Component),m=function(e){Object(l.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(r.a)(this,i),(s=t.call(this,e)).onChange=function(e){switch(document.getElementById("blah").src=URL.createObjectURL(e.target.files[0]),e.target.name){case"selectedFile":s.setState({selectedFile:e.target.files[0]});break;default:s.setState(Object(j.a)({},e.target.name,e.target.value))}},s.onSubmit=function(e){e.preventDefault();var t=s.state,i=t.description,n=t.selectedFile,o=new FormData;o.append("description",i),o.append("selectedFile",n),p.a.post("/uploadProfilePic",o).then((function(e){console.log(e),s.props.callback(!0),s.setState({uploadPrompt:!1})}))},s.state={description:"",selectedFile:"",uploadPrompt:!1},s}return Object(a.a)(i,[{key:"getCookie",value:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2];console.log("--could not find cookie---")}},{key:"toggleUploadPrompt",value:function(){1==this.state.uploadPrompt?this.setState({uploadPrompt:!1}):this.setState({uploadPrompt:!0})}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{id:"profilePicUploadButton",onClick:function(){e.toggleUploadPrompt()},children:"Change Profile Pic"}),this.state.uploadPrompt?Object(v.jsxs)("div",{id:"uploadPrompt",children:[Object(v.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(v.jsx)("button",{onClick:function(){e.toggleUploadPrompt()},children:" Cancel "}),Object(v.jsx)("input",{type:"file",name:"selectedFile",accept:"image/*",onChange:this.onChange}),Object(v.jsx)("button",{type:"submit",children:"Submit"})]}),Object(v.jsx)("img",{id:"blah"})]}):null]})}}]),i}(s.Component),x=function(e){Object(l.a)(i,e);var t=Object(d.a)(i);function i(){var e;return Object(r.a)(this,i),(e=t.call(this)).state={showOptions:!1},e}return Object(a.a)(i,[{key:"getCookie",value:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2];console.log("--could not find cookie---")}},{key:"delete",value:function(e){var t=this;console.log(e),g.a.ajax({type:"DELETE",url:"/deleteFile",token:this.getCookie("token"),headers:{img_ref:e},success:function(e){console.log(e),t.props.refresh(!0)},error:function(e){console.log(e)}})}},{key:"toggle",value:function(){0==this.state.showOptions?this.setState({showOptions:!0}):this.setState({showOptions:!1})}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"mediaContainerCell",children:[Object(v.jsx)("img",{src:this.props.link}),Object(v.jsx)("button",{className:"mediaOptionsButton",onClick:function(){e.toggle()},children:"*"}),this.state.showOptions?Object(v.jsx)("div",{className:"mediaOptionsPrompt",children:Object(v.jsx)("button",{onClick:function(){e.delete(e.props.img_ref)},children:"Delete"})}):null]})}}]),i}(n.a.Component),k=function(e){Object(l.a)(i,e);var t=Object(d.a)(i);function i(){var e;return Object(r.a)(this,i),(e=t.call(this)).state={newMediaPostButton:!1,editAccountMode:!1,temp_profile:{bio:"",location:"",job:"",school:"",sin_weed:0,sin_alch:0,sin_nicc:0},profilePicRef:"",freeMediaSlot:!0,mediaObjects:[]},e.getMediaRefs=e.getMediaRefs.bind(Object(h.a)(e)),e.getProfile=e.getProfile.bind(Object(h.a)(e)),e.profilePicUploadCallback=e.profilePicUploadCallback.bind(Object(h.a)(e)),e}return Object(a.a)(i,[{key:"getCookie",value:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2];console.log("--could not find cookie---")}},{key:"componentDidMount",value:function(){this.getProfile(),this.getMediaRefs()}},{key:"getProfile",value:function(e){var t=this;if(""==this.props.user.account_name||1==e)console.log("user not found in redux store, fetching..."),g.a.ajax({type:"GET",url:"/api/userByid",token:this.getCookie("token"),headers:{user_id:this.getCookie("user_id")},success:function(e){if(console.log(e),"EC.1"==e)console.log("no profile data found"),t.setState({newUser:!0});else{t.setState({user_profile:e}),t.props.UPDATE_USER(e);var i="/api/mediaObject/"+e.profile_pic_ref;t.setState({profilePicRef:i})}},error:function(e){console.log(e)}});else{console.log("user found in redux store");var i="/api/mediaObject/"+this.props.user.profile_pic_ref;this.setState({profilePicRef:i})}}},{key:"getMediaRefs",value:function(e){var t=this;0==this.props.userImages.length||1==e?g.a.ajax({type:"GET",url:"/api/allAccountMediaRefs",token:this.getCookie("token"),headers:{user_id:this.getCookie("user_id")},success:function(e){console.log("user media refs"),console.log(e),t.setState({mediaObjects:e}),t.props.UPDATE_USER_IMAGES(e),9==e.length&&t.setState({freeMediaSlot:!1})},error:function(e){console.log(e)}}):console.log("user media refs found in redux store")}},{key:"editProfile",value:function(){0==this.state.editAccountMode?(this.setState({editAccountMode:!0}),this.setState({temp_profile:this.props.user})):(this.setState({editAccountMode:!1}),this.saveProfile())}},{key:"saveProfile",value:function(){this.setState({user_profile:this.state.temp_profile});var e=this.state.temp_profile,t={user_id:this.getCookie("user_id"),bio:e.bio,location:e.location,job:e.job,school:e.school,sin_weed:e.sin_weed?1:0,sin_alch:e.sin_alch?1:0,sin_nicc:e.sin_nicc?1:0};g.a.ajax({type:"PUT",url:"/api/updateAccountBio",token:this.getCookie("token"),data:t,success:function(e){console.log(e)},error:function(e){console.log(e)}})}},{key:"handleProfileEdits",value:function(e){var t=this.state.temp_profile;t[e.target.name]=e.target.value,this.setState({temp_profile:t})}},{key:"handleCheckboxs",value:function(e){var t=this.state.temp_profile;t[e.target.name]=e.target.checked,this.setState({temp_profile:t})}},{key:"profilePicUploadCallback",value:function(){this.setState({initProfileExists:!0})}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{id:"account",className:"foreGround ",children:[Object(v.jsxs)("div",{id:"wakzakbak",children:[Object(v.jsxs)("div",{id:"accountUnchanging",children:[Object(v.jsx)("img",{src:this.state.profilePicRef}),Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:this.props.user.proper_name}),Object(v.jsx)("h3",{children:this.props.user.account_name}),Object(v.jsx)("h3",{children:this.props.user.age}),this.state.editAccountMode?Object(v.jsx)("button",{id:"editAccModeButton",onClick:function(){e.editProfile()},children:"Save"}):Object(v.jsx)("button",{id:"editAccModeButton",onClick:function(){e.editProfile()},children:"Edit Profile"})]})]}),Object(v.jsx)("div",{id:"accountChanging",children:this.state.editAccountMode?Object(v.jsxs)("div",{id:"editMode",children:[Object(v.jsx)(m,{callback:this.getProfile}),Object(v.jsx)("h4",{children:"Biography"}),Object(v.jsx)("textarea",{id:"editBio",rows:"10",cols:"20",name:"bio",value:this.state.temp_profile.bio,onChange:function(t){e.handleProfileEdits(t)}}),Object(v.jsx)("h4",{children:"Location"}),Object(v.jsx)("input",{type:"text",name:"location",value:this.state.temp_profile.location,onChange:function(t){e.handleProfileEdits(t)}}),Object(v.jsx)("h4",{children:"Job"}),Object(v.jsx)("input",{type:"text",name:"job",value:this.state.temp_profile.job,onChange:function(t){e.handleProfileEdits(t)}}),Object(v.jsx)("h4",{children:"School"}),Object(v.jsx)("input",{type:"text",name:"school",value:this.state.temp_profile.school,onChange:function(t){e.handleProfileEdits(t)}}),Object(v.jsx)("h3",{children:"Sins"}),Object(v.jsxs)("div",{className:"sinOption",children:[Object(v.jsx)("h3",{children:"That sticky icky icky"}),Object(v.jsx)("input",{type:"checkbox",name:"sin_weed",checked:this.state.temp_profile.sin_weed,onClick:function(t){e.handleCheckboxs(t)}})]}),Object(v.jsxs)("div",{className:"sinOption",children:[Object(v.jsx)("h3",{children:"Bottles *clink*"}),Object(v.jsx)("input",{type:"checkbox",name:"sin_alch",checked:this.state.temp_profile.sin_alch,onClick:function(t){e.handleCheckboxs(t)}})]}),Object(v.jsxs)("div",{className:"sinOption",children:[Object(v.jsx)("h3",{children:"Ciggys *cringe*"}),Object(v.jsx)("input",{type:"checkbox",name:"sin_nicc",checked:this.state.temp_profile.sin_nicc,onClick:function(t){e.handleCheckboxs(t)}})]})]}):Object(v.jsxs)("div",{id:"displayMode",children:[Object(v.jsx)("h3",{children:this.props.user.bio}),Object(v.jsxs)("h3",{children:[Object(v.jsx)("b",{children:"Located near: "})," ",this.props.user.location]}),Object(v.jsxs)("h3",{children:[Object(v.jsx)("b",{children:"Occupation: "})," ",this.props.user.job]}),Object(v.jsxs)("h3",{children:[Object(v.jsx)("b",{children:"Education: "})," ",this.props.user.school]}),Object(v.jsx)("h3",{children:Object(v.jsx)("b",{children:"Sins: "})}),this.props.user.sin_weed?Object(v.jsx)("h4",{children:"That sticky icky icky"}):null,this.props.user.sin_alch?Object(v.jsx)("h4",{children:"Bottles *clink*"}):null,this.props.user.sin_nicc?Object(v.jsx)("h4",{children:"Ciggys *cringe*"}):null]})})]}),Object(v.jsxs)("div",{id:"mediaContainer",children:[this.props.userImages.map((function(t,i){var s="/api/mediaObject/"+t.ref;return Object(v.jsx)(x,{refresh:e.getMediaRefs,link:s,img_ref:t.ref})})),this.state.freeMediaSlot?Object(v.jsx)("div",{className:"mediaContainerCell",id:"freeMediaSlotCell",children:Object(v.jsx)(O,{refresh:this.getMediaRefs})}):null]}),Object(v.jsx)("footer",{})]})}}]),i}(n.a.Component),y=function(e){return{type:"UPDATE_USER",value:e}},_=function(e){return{type:"UPDATE_HOSTED_FIRESIDE",value:e}},C=function(e){return{type:"UPDATE_SENT_FIRESIDE_INVITES",value:e}},S=Object(u.b)((function(e){return{user:e.user,userImages:e.userImages}}),(function(e){return{UPDATE_USER:function(t){return e(y(t))},UPDATE_USER_IMAGES:function(t){return e(function(e){return{type:"UPDATE_USER_IMAGES",value:e}}(t))}}}))(k),F=function(e){Object(l.a)(i,e);var t=Object(d.a)(i);function i(){var e;return Object(r.a)(this,i),(e=t.call(this)).state={searchName:"",results:{profiles:[],media:[]},noResults:!1},e}return Object(a.a)(i,[{key:"getCookie",value:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2];console.log("--could not find cookie---")}},{key:"search",value:function(e){var t=this;""!=e&&g.a.ajax({type:"GET",url:"/api/userByUsername",token:this.getCookie("token"),headers:{account_name:e},success:function(e){"EC.1"==e?(console.log("no profile data found"),t.setState({noResults:!0})):(t.setState({results:e}),t.setState({noResults:!1}),console.log(e))},error:function(e){console.log(e)}})}},{key:"followRequest",value:function(e){console.log(e);var t={requester_id:this.getCookie("user_id"),requestee_id:e};g.a.ajax({type:"POST",url:"/api/friendRequest",token:this.getCookie("token"),data:t,success:function(e){console.log(e)},error:function(e){console.log(e)}})}},{key:"navProfile",value:function(e){window.location.href="/dashboard/user/"+e}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{id:"search",className:"foreGround",children:[Object(v.jsxs)("div",{id:"searchBar",children:[Object(v.jsx)("input",{type:"text",placeholder:"Search by username",value:this.state.searchName,onChange:function(t){e.setState({searchName:t.target.value})}}),Object(v.jsx)("button",{onClick:function(t){e.search(e.state.searchName)},children:"Search"})]}),this.state.noResults?Object(v.jsx)("div",{id:"noSearchResultsPrompt",children:Object(v.jsx)("h1",{children:"No results"})}):Object(v.jsx)("div",{children:this.state.results.profiles.map((function(t,i){if(t.user_id!=e.getCookie("user_id")){var s="/api/mediaObject/"+t.profile_pic_ref;return Object(v.jsxs)("div",{className:"searchResult",children:[Object(v.jsx)("img",{src:s}),Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:t.account_name}),Object(v.jsx)("h3",{children:t.proper_name}),Object(v.jsx)("h3",{children:t.age})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{onClick:function(){e.followRequest(t.user_id)},children:"Follow"}),Object(v.jsx)("button",{onClick:function(){e.navProfile(t.user_id)},children:"Profile"})]})]})}}))})]})}}]),i}(n.a.Component),E=Object(u.b)((function(e){return{user:e.user}}),(function(e){return{}}))(F),T=i(35),w=[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"administrative",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.country",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"administrative.country",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"administrative.country",elementType:"labels.text",stylers:[{visibility:"simplified"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"all",stylers:[{visibility:"simplified"},{saturation:"-100"},{lightness:"30"}]},{featureType:"administrative.neighborhood",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{visibility:"simplified"},{gamma:"0.00"},{lightness:"74"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{lightness:"3"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]}],P=function(e){Object(l.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(r.a)(this,i),(s=t.call(this,e)).state={publicFiresides:[],friendsFiresides:[],privateFiresides:[],invites:[],selectedFireside:null,menuOpen:!1,noInvites:!1,showPublic:!0,showFriends:!1,showPrivate:!1},s.toggleInvites=s.toggleInvites.bind(Object(h.a)(s)),s.toggleMapOptions=s.toggleMapOptions.bind(Object(h.a)(s)),s.removeInviteFromClient=s.removeInviteFromClient.bind(Object(h.a)(s)),s}return Object(a.a)(i,[{key:"componentDidMount",value:function(){this.getFiresides(),this.getInvites()}},{key:"getCookie",value:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2];console.log("--could not find cookie---")}},{key:"getInvites",value:function(){var e=this;g.a.ajax({type:"GET",url:"/api/firesideInvites",token:this.getCookie("token"),headers:{user_id:this.getCookie("user_id")},success:function(t){console.log("invites"),console.log(t),e.setState({invites:t}),0==t.length?e.setState({noInvites:!0}):e.setState({noInvites:!1})},error:function(e){console.log(e)}})}},{key:"getFiresides",value:function(){var e=this;g.a.ajax({type:"GET",url:"/api/publicFiresides",token:this.getCookie("token"),headers:{user_id:this.getCookie("user_id")},success:function(t){console.log("public firesides"),console.log(t),e.setState({publicFiresides:t})},error:function(e){console.log(e)}}),g.a.ajax({type:"GET",url:"/api/friendsOnlyFiresides",token:this.getCookie("token"),headers:{user_id:this.getCookie("user_id")},success:function(t){console.log("friends firesides"),console.log(t),e.setState({friendsFiresides:t})},error:function(e){console.log(e)}}),g.a.ajax({type:"GET",url:"/api/privateFiresides",token:this.getCookie("token"),headers:{user_id:this.getCookie("user_id")},success:function(t){console.log("private firesides"),console.log(t),e.setState({privateFiresides:t})},error:function(e){console.log(e)}})}},{key:"acceptInvite",value:function(e){var t=this,i={user_id:this.getCookie("user_id"),fireside_id:e,type:"accept"};console.log(i),g.a.ajax({type:"POST",url:"/api/handleInvites",token:this.getCookie("token"),data:i,success:function(i){console.log(i),t.removeInviteFromClient(e)},error:function(e){console.log(e)}})}},{key:"declineInvite",value:function(e){var t=this,i={user_id:this.getCookie("user_id"),fireside_id:e,type:"decline"};console.log(i),g.a.ajax({type:"POST",url:"/api/handleInvites",token:this.getCookie("token"),data:i,success:function(i){console.log(i),t.removeInviteFromClient(e)},error:function(e){console.log(e)}})}},{key:"removeInviteFromClient",value:function(e){var t=this.state.invites;t.map((function(i,s){i.fireside_id==e&&t.splice(s,1)})),this.setState({invites:t}),0==t.length&&this.setState({noInvites:!0})}},{key:"navHostProfile",value:function(e){window.location.href="/dashboard/user/"+e}},{key:"toggleInvites",value:function(){1==this.state.menuOpen?this.setState({menuOpen:!1}):this.setState({menuOpen:!0})}},{key:"toggleMapOptions",value:function(e){console.log(e.target.name+" "+this.state[e.target.name]),1==this.state[e.target.name]?(this.setState(Object(j.a)({},e.target.name,!1)),g()("#"+e.target.name).removeClass("activeMapOption")):(this.setState(Object(j.a)({},e.target.name,!0)),g()("#"+e.target.name).addClass("activeMapOption"))}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{id:"ziggyb",children:[Object(v.jsxs)("div",{id:"mapOptions",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{id:"showPublic",onClick:function(t){e.toggleMapOptions(t)},name:"showPublic",className:"mapButton activeMapOption",children:"Show Public"}),Object(v.jsx)("button",{id:"showFriends",onClick:function(t){e.toggleMapOptions(t)},name:"showFriends",className:"mapButton ",children:"Show Friends"}),Object(v.jsx)("button",{id:"showPrivate",onClick:function(t){e.toggleMapOptions(t)},name:"showPrivate",className:"mapButton",children:"Show Private"})]}),Object(v.jsxs)("div",{id:"mapOptionsDropDownContainer",className:"dropDownContainer",children:[Object(v.jsx)("button",{onClick:function(){e.toggleInvites()},children:"Invites"}),this.state.menuOpen?Object(v.jsx)("div",{id:"invitesDropDown",children:this.state.noInvites?Object(v.jsx)("div",{id:"noInvitesCard",children:Object(v.jsx)("h1",{children:"No Invites"})}):Object(v.jsx)("div",{children:this.state.invites.map((function(t,i){return Object(v.jsxs)("div",{className:"firesideInviteCard",children:[Object(v.jsx)("h3",{children:t.proper_name}),Object(v.jsx)("h4",{children:t.account_name}),Object(v.jsx)("h4",{children:t.vibe}),Object(v.jsx)("h4",{children:t.location_address}),Object(v.jsxs)("div",{children:[t.allowFriends?Object(v.jsx)("h4",{children:"Friends"}):null,t.allow_public?Object(v.jsx)("h4",{children:"Public"}):null]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{onClick:function(){e.acceptInvite(t.fireside_id)},children:"Accept"}),Object(v.jsx)("button",{onClick:function(){e.declineInvite(t.fireside_id)},children:"Decline"}),Object(v.jsx)("button",{onClick:function(){e.navHostProfile(t.user_id)},children:"Host Profile"})]})]},i)}))})}):null]})]}),Object(v.jsxs)(T.GoogleMap,{defaultZoom:10,defaultCenter:{lat:29.424,lng:-98.493},defaultOptions:{styles:w},children:[this.state.showPublic?Object(v.jsx)("div",{children:this.state.publicFiresides.map((function(t,i){return Object(v.jsx)(T.Marker,{position:{lat:parseFloat(t.lat),lng:parseFloat(t.lng)},onClick:function(){e.setState({selectedFireside:t})},icon:{url:"/campfiregif.gif",scaledSize:new window.google.maps.Size(35,35)}},i)}))}):null,this.state.showPrivate?Object(v.jsx)("div",{children:this.state.privateFiresides.map((function(t,i){return Object(v.jsx)(T.Marker,{position:{lat:parseFloat(t.lat),lng:parseFloat(t.lng)},onClick:function(){e.setState({selectedFireside:t})},icon:{url:"/campfiregif.gif",scaledSize:new window.google.maps.Size(35,35)}},i)}))}):null,this.state.showFriends?Object(v.jsx)("div",{children:this.state.friendsFiresides.map((function(t,i){return Object(v.jsx)(T.Marker,{position:{lat:parseFloat(t.lat),lng:parseFloat(t.lng)},onClick:function(){e.setState({selectedFireside:t})},icon:{url:"/campfiregif.gif",scaledSize:new window.google.maps.Size(35,35)}},i)}))}):null,this.state.selectedFireside&&Object(v.jsx)(T.InfoWindow,{position:{lat:parseFloat(this.state.selectedFireside.lat),lng:parseFloat(this.state.selectedFireside.lng)},onCloseClick:function(){e.setState({selectedFireside:null})},children:Object(v.jsxs)("div",{className:"mapPopup",children:[Object(v.jsx)("h4",{children:this.state.selectedFireside.proper_name}),Object(v.jsx)("h5",{children:this.state.selectedFireside.account_name}),Object(v.jsx)("h4",{children:this.state.selectedFireside.vibe}),Object(v.jsxs)("h4",{children:["Located Near: ",this.state.selectedFireside.location_address]}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:function(){e.navHostProfile(e.state.selectedFireside.user_id)},children:"Host Profile"})})]})})]})]})}}]),i}(n.a.Component),I=Object(T.withScriptjs)(Object(T.withGoogleMap)(P)),D=function(e){Object(l.a)(i,e);var t=Object(d.a)(i);function i(e){return Object(r.a)(this,i),t.call(this,e)}return Object(a.a)(i,[{key:"getCookie",value:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2];console.log("--could not find cookie---")}},{key:"render",value:function(){return Object(v.jsx)("div",{id:"firesidesPage",className:"foreGround",children:Object(v.jsx)("div",{id:"logzogpog",children:Object(v.jsx)(I,{googleMapURL:"https://maps.googleapis.com/maps/api/js?libraries=geometry,drawing,places&key="+this.getCookie("google_key")+"&map_ids=3c46cb13965c159e",loadingElement:Object(v.jsx)("div",{style:{height:"100%"}}),containerElement:Object(v.jsx)("div",{style:{height:"100%"}}),mapElement:Object(v.jsx)("div",{style:{height:"100%"}})})})})}}]),i}(n.a.Component),R=Object(u.b)((function(e){return{user:e.user,firesides:e.firesides,hostedFireside:e.hostedFireside,firesideInvites:e.firesideInvites,sentFiresideInvites:e.sentFiresideInvites}}),(function(e){return{UPDATE_FIRESIDES:function(t){return e(function(e){return{type:"UPDATE_FIRESIDES",value:e}}(t))},UPDATE_FIRESIDE_INVITES:function(t){return e(function(e){return{type:"UPDATE_FIRESIDE_INVITES",value:e}}(t))},UPDATE_SENT_FIRESIDE_INVITES:function(t){return e(C(t))},UPDATE_HOSTED_FIRESIDE:function(t){return e(_(t))}}}))(D),M=function(e){Object(l.a)(i,e);var t=Object(d.a)(i);function i(){var e;return Object(r.a)(this,i),(e=t.call(this)).state={noFiresides:!0,fireside:{},vibe:"",location_address:"",allow_friends:0,allow_public:0,invitePrompt:!1,friends:{users_data:[],friends_data:[]},noFriends:!0,noInvited:!0,updateFiresideView:!1,newVibe:"",newLoc:"",newAllow_friends:0,newAllow_public:0},e}return Object(a.a)(i,[{key:"getCookie",value:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2];console.log("--could not find cookie---")}},{key:"componentDidMount",value:function(){this.getMyFireside(),this.getFriends()}},{key:"getMyFireside",value:function(e){var t=this;""==this.props.hostedFireside.fireside.location_address||1==e?g.a.ajax({type:"GET",url:"/api/getMyFiresides",token:this.getCookie("token"),headers:{user_id:this.getCookie("user_id")},success:function(e){console.log(e),"ec3"!=e?(t.setState({fireside:e}),t.setState({noFiresides:!1}),t.props.UPDATE_HOSTED_FIRESIDE(e)):t.setState({noFiresides:!0})},error:function(e){console.log(e)}}):(console.log("hosted fireside found in redux"),this.setState({fireside:this.props.hostedFireside}),this.setState({noFiresides:!1}))}},{key:"createFireside",value:function(){var e=this,t={user_id:this.getCookie("user_id"),vibe:this.state.vibe,location_address:this.state.location_address,allow_friends:this.state.allow_friends?1:0,allow_public:this.state.allow_public?1:0};""==t.vibe||""==t.location_address||""==t.access?alert("please fill out all form values ty"):g.a.ajax({type:"POST",url:"/api/createNewFireside",token:this.getCookie("token"),data:t,success:function(t){console.log(t),e.getMyFireside()},error:function(e){console.log(e)}})}},{key:"deleteFireside",value:function(){var e=this;"y"==prompt("enter y to confirm")&&g.a.ajax({type:"DELETE",url:"/api/deleteFireside",token:this.getCookie("token"),headers:{fireside_id:this.state.fireside.fireside.id},success:function(t){e.getMyFireside()},error:function(e){console.log(e)}})}},{key:"getFriends",value:function(){var e=this;g.a.ajax({type:"GET",url:"/api/getFriends",token:this.getCookie("token"),headers:{user_id:this.getCookie("user_id")},success:function(t){"ec2"==t?e.setState({noFriends:!0}):(e.setState({friends:t}),e.setState({noFriends:!1}))},error:function(e){console.log(e)}})}},{key:"toggleInviteList",value:function(){0==this.state.invitePrompt?(this.setState({invitePrompt:!0}),g()("#inviteFriendsButton").addClass("active")):(this.setState({invitePrompt:!1}),g()("#inviteFriendsButton").removeClass("active"))}},{key:"cancelInvite",value:function(e){var t=this;console.log(e),g.a.ajax({type:"DELETE",url:"/api/cancelInvite",token:this.getCookie("token"),headers:{user_id:e,fireside_id:this.state.fireside.fireside.id},success:function(e){t.getMyFireside(!0)},error:function(e){console.log(e)}})}},{key:"inviteFriend",value:function(e){var t=this,i={user_id:e,fireside_id:this.state.fireside.fireside.id};g.a.ajax({type:"POST",url:"/api/inviteToFireside",token:this.getCookie("token"),data:i,success:function(e){t.getMyFireside(!0)},error:function(e){console.log(e)}})}},{key:"toggleFiresideUpdateView",value:function(){0==this.state.updateFiresideView?(this.setState({updateFiresideView:!0}),g()("#editFiresideButton").addClass("active")):(this.setState({updateFiresideView:!1}),g()("#editFiresideButton").removeClass("active"))}},{key:"updateFireside",value:function(){var e=this,t={fireside_id:this.state.fireside.fireside.id,vibe:this.state.newVibe,location_address:this.state.newLoc,oldAddress:this.state.fireside.fireside.location_address,allow_friends:this.state.newAllow_friends?1:0,allow_public:this.state.newAllow_public?1:0};g.a.ajax({type:"PUT",url:"/api/updateFireside",token:this.getCookie("token"),data:t,success:function(t){e.getMyFireside(),e.setState({updateFiresideView:!1})},error:function(e){console.log(e)}})}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{id:"Host",className:"foreGround",children:[this.state.noFiresides?Object(v.jsxs)("div",{id:"createFiresidePrompt",children:[Object(v.jsx)("h1",{children:"Host a fireside!"}),Object(v.jsxs)("div",{id:"formHeader",children:[Object(v.jsx)("h3",{children:"Vibe"}),Object(v.jsx)("h3",{children:"Location Address"}),Object(v.jsx)("h3",{children:"Access"})]}),Object(v.jsxs)("form",{id:"hostFiresideForm",onSubmit:function(e){e.preventDefault()},children:[Object(v.jsx)("input",{value:this.state.vibe,onChange:function(t){e.setState({vibe:t.target.value})},type:"text",placeholder:"vibe"}),Object(v.jsx)("input",{value:this.state.location_address,onChange:function(t){e.setState({location_address:t.target.value})},type:"text",placeholder:"location address"}),Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Allow Friends?"}),Object(v.jsx)("input",{type:"checkbox",value:this.state.allow_friends,onChange:function(t){e.setState({allow_friends:t.target.checked})}})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Allow Public?"}),Object(v.jsx)("input",{type:"checkbox",value:this.state.allow_public,onChange:function(t){e.setState({allow_public:t.target.checked})}})]})]}),Object(v.jsx)("button",{onClick:function(){e.createFireside()},children:"Create"}),Object(v.jsxs)("div",{id:"guidelines",children:[Object(v.jsx)("h3",{children:"Guidelines"}),Object(v.jsx)("p",{children:"Don't be an asshole. Don't trick people into tresspassing. Don't harm your guests. If you have any covid symptoms don't host a fireside. Don't spit on people. Know the risks when sharing food/drink/smoke. Just be responsible, its not that hard. If you can't define what \"responsible\" is on your own then don't host a fireside."})]})]}):Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{id:"firesideDetails",children:[Object(v.jsx)("h1",{children:"My Fireside"}),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{children:this.state.updateFiresideView?Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{type:"text",placeholder:this.state.fireside.fireside.vibe,value:this.state.newVibe,onChange:function(t){e.setState({newVibe:t.target.value})}}),Object(v.jsx)("input",{type:"text",placeholder:this.state.fireside.fireside.location_address,value:this.state.newLoc,onChange:function(t){e.setState({newLoc:t.target.value})}}),Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Allow Friends?"}),Object(v.jsx)("input",{type:"checkbox",checked:this.state.newAllow_friends,onChange:function(t){e.setState({newAllow_friends:t.target.checked})}})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Allow Public?"}),Object(v.jsx)("input",{type:"checkbox",checked:this.state.newAllow_public,onChange:function(t){e.setState({newAllow_public:t.target.checked})}})]}),Object(v.jsx)("button",{onClick:function(){e.updateFireside()},children:"Save"})]}):Object(v.jsxs)("div",{children:[Object(v.jsxs)("h3",{children:["Vibe: ",this.state.fireside.fireside.vibe]}),Object(v.jsxs)("h3",{children:["Location: ",this.state.fireside.fireside.location_address]}),Object(v.jsxs)("h3",{children:["Allow friends? ",this.state.fireside.fireside.allow_friends?"True":"False"]}),Object(v.jsxs)("h3",{children:["Allow public? ",this.state.fireside.fireside.allow_public?"True":"False"]})]})}),Object(v.jsxs)("div",{children:[Object(v.jsxs)("h4",{children:["Invites: ",this.state.fireside.invites.length]}),Object(v.jsxs)("h4",{children:["Attendance: ",this.state.fireside.attendance.length]})]})]})]}),Object(v.jsxs)("div",{id:"firesideOptions",children:[Object(v.jsx)("button",{id:"editFiresideButton",onClick:function(){e.toggleFiresideUpdateView()},children:"Edit"}),Object(v.jsx)("button",{id:"inviteFriendsButton",onClick:function(){e.toggleInviteList()},children:"Invite Friends"}),Object(v.jsx)("button",{onClick:function(){e.deleteFireside()},children:"End Fireside"})]}),Object(v.jsxs)("div",{id:"firesideListsDisplay",children:[Object(v.jsxs)("div",{id:"attendanceDisplay",children:[Object(v.jsx)("h2",{children:"Attending"}),this.state.fireside.attendance.map((function(e,t){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:e.proper_name}),Object(v.jsx)("h4",{children:e.account_name})]})}))]}),Object(v.jsxs)("div",{id:"invitesDisplay",children:[Object(v.jsx)("h2",{children:"Invited"}),this.state.fireside.invites.map((function(t,i){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:t.proper_name}),Object(v.jsx)("h4",{children:t.account_name}),Object(v.jsx)("button",{onClick:function(){e.cancelInvite(t.user_id)},children:"Cancel Invite"})]})}))]})]})]}),this.state.invitePrompt?Object(v.jsx)("div",{id:"inviteToFiresidePrompt",children:this.state.noFriends?Object(v.jsx)("div",{id:"noFriendsPrompt",children:Object(v.jsx)("h2",{children:"RIP somebody has no friends"})}):Object(v.jsxs)("div",{id:"friendSelection",children:[Object(v.jsx)("h3",{children:"My Friends"}),this.state.friends.friends_data.map((function(t,i){var s,n;if(s=e.state.fireside.invites.map((function(e,i){if(e.user_id==t.id)return!0})),n=e.state.fireside.attendance.map((function(e,i){if(e.user_id==t.id)return!0})),console.log("attending: "+n+" invited: "+s),0==n&&0==s)return Object(v.jsxs)("div",{className:"friendSelectionOption",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("h3",{children:t.account_name}),Object(v.jsx)("h3",{children:t.proper_name})]}),Object(v.jsx)("button",{onClick:function(){e.inviteFriend(t.id)},children:"Invite"})]})}))]})}):null]})}}]),i}(n.a.Component),U=Object(u.b)((function(e){return{hostedFireside:e.hostedFireside,sentFiresideInvites:e.sentFiresideInvites}}),(function(e){return{UPDATE_HOSTED_FIRESIDE:function(t){return e(_(t))},UPDATE_SENT_FIRESIDE_INVITES:function(t){return e(C(t))}}}))(M),A=function(e){Object(l.a)(i,e);var t=Object(d.a)(i);function i(){var e;return Object(r.a)(this,i),(e=t.call(this)).state={friends:{users_data:[],friends_data:[]},requests:[],thread:[],selectedThreadUserData:{},thread_id:null,friendsMode:!0,requestsMode:!1,newMessage:"",threadSelected:!1,threadOptionsOpen:!1},e}return Object(a.a)(i,[{key:"getCookie",value:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2];console.log("--could not find cookie---")}},{key:"componentDidMount",value:function(){this.getRequests(),this.getFriends()}},{key:"getFriends",value:function(){var e=this;g.a.ajax({type:"GET",url:"/api/getFriends",token:this.getCookie("token"),headers:{user_id:this.getCookie("user_id")},success:function(t){console.log(t),"ec2"!=t&&e.setState({friends:t})},error:function(e){console.log(e)}})}},{key:"getRequests",value:function(){var e=this;g.a.ajax({type:"GET",url:"/api/getIncomingFriendRequests",token:this.getCookie("token"),headers:{user_id:this.getCookie("user_id")},success:function(t){console.log(t),e.setState({requests:t})},error:function(e){console.log(e)}})}},{key:"getThread",value:function(e,t){var i=this,s=document.getElementById("threadDisplay");s.scrollTop=s.scrollHeight,console.log(e),g.a.ajax({type:"GET",url:"/api/thread",token:this.getCookie("token"),headers:{thread_id:e},success:function(s){console.log(s),i.setState({thread_id:e}),i.setState({thread:s}),i.state.friends.friends_data.map((function(e,s){console.log(t),e.id==t&&(i.setState({selectedThreadUserData:e}),0==i.state.threadSelected&&i.setState({threadSelected:!0}),console.log(e))}))},error:function(e){console.log(e)}})}},{key:"acceptFriendRequest",value:function(e){var t=this,i={user_1_id:e,user_2_id:this.getCookie("user_id")};g.a.ajax({type:"POST",url:"/api/acceptFriendRequest",token:this.getCookie("token"),data:i,success:function(i){console.log(i);var s=t.state.requests;s.map((function(i,n){i.requester==e&&i.requestee==t.getCookie("user_id")&&s.splice(n,1)})),t.setState({requests:s}),t.getFriends()},error:function(e){console.log(e)}})}},{key:"denyFriendRequest",value:function(e){var t=this;g.a.ajax({type:"POST",url:"/api/denyFriendRequest",token:this.getCookie("token"),headers:{requester:e,requestee:this.getCookie("user_id")},success:function(i){console.log(i);var s=t.state.requests;s.map((function(i,n){i.requester==e&&i.requestee==t.getCookie("user_id")&&s.splice(n,1)})),t.setState({requests:s})},error:function(e){console.log(e)}})}},{key:"swap",value:function(e){console.log(e.target.name+" "+e.target.id),g()(".messengerLeftPanelActive").removeClass("messengerLeftPanelActive"),"friendsMode"==e.target.name?(this.setState({friendsMode:!0}),g()("#"+e.target.id).addClass("messengerLeftPanelActive")):this.setState({friendsMode:!1}),"requestsMode"==e.target.name?(this.setState({requestsMode:!0}),g()("#"+e.target.id).addClass("messengerLeftPanelActive")):this.setState({requestsMode:!1})}},{key:"sendMessage",value:function(e){var t=this;if(null==e)alert("select a thread");else{var i={sender_id:this.getCookie("user_id"),thread_id:this.state.thread_id,message:this.state.newMessage};console.log(i),g.a.ajax({type:"POST",url:"/api/newMessage",token:this.getCookie("token"),data:i,success:function(i){console.log(i),t.setState({newMessage:""}),t.getThread(e)},error:function(e){console.log(e)}})}}},{key:"toggleOptions",value:function(){1==this.state.threadOptionsOpen?this.setState({threadOptionsOpen:!1}):this.setState({threadOptionsOpen:!0})}},{key:"removeFriend",value:function(e){console.log(e)}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{id:"messenger",className:"foreGround",children:[Object(v.jsxs)("div",{id:"messengerLeftPanel",children:[Object(v.jsxs)("div",{id:"messengerLeftPanelHeader",children:[Object(v.jsx)("button",{id:"friendsModeButton",className:"messengerLeftPanelActive",name:"friendsMode",onClick:function(t){e.swap(t)},children:"Friends"}),Object(v.jsx)("button",{id:"requestsModeButton",name:"requestsMode",onClick:function(t){e.swap(t)},children:"Requests"})]}),this.state.friendsMode?Object(v.jsxs)("div",{id:"friendSelection",className:"leftPanelHeader",children:[Object(v.jsx)("h3",{children:"My Friends"}),this.state.friends.friends_data.map((function(t,i){var s="/api/mediaObject/"+t.profile_pic_ref;return Object(v.jsxs)("div",{className:"leftPanelCard",onClick:function(){e.getThread(e.state.friends.users_data[i].id,t.id)},children:[Object(v.jsx)("img",{src:s}),Object(v.jsxs)("div",{className:"dumbboi",children:[Object(v.jsx)("h3",{children:t.account_name}),Object(v.jsx)("h3",{children:t.proper_name})]})]})}))]}):null,this.state.requestsMode?Object(v.jsxs)("div",{id:"friendRequestSelection",className:"leftPanelHeader",children:[Object(v.jsx)("h3",{children:"Friend Requests"}),this.state.requests.map((function(t,i){var s="/api/mediaObject/"+t.profile_pic_ref;return Object(v.jsxs)("div",{className:"leftPanelCard",children:[Object(v.jsx)("img",{src:s}),Object(v.jsxs)("div",{className:"dumbboi",children:[Object(v.jsx)("h3",{children:t.account_name}),Object(v.jsx)("h3",{children:t.proper_name})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{onClick:function(){e.acceptFriendRequest(t.requester)},children:"Accept"}),Object(v.jsx)("button",{onClick:function(){e.denyFriendRequest(t.requester)},children:"Deny"})]})]})}))]}):null]}),Object(v.jsxs)("div",{id:"messengerMain",children:[this.state.threadSelected?Object(v.jsxs)("div",{id:"threadHeader",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("img",{src:"/api/mediaObject/".concat(this.state.selectedThreadUserData.profile_pic_ref)}),Object(v.jsxs)("div",{className:"dumbboi",children:[Object(v.jsx)("h3",{children:this.state.selectedThreadUserData.account_name}),Object(v.jsx)("h3",{children:this.state.selectedThreadUserData.proper_name})]})]}),Object(v.jsx)("button",{onClick:function(){e.toggleOptions()},children:"Options"}),this.state.threadOptionsOpen?Object(v.jsx)("div",{id:"threadOptionsContainer",children:Object(v.jsx)("button",{onClick:function(){e.removeFriend(e.state.thread_id)},children:"Unfriend"})}):null]}):null,Object(v.jsx)("div",{id:"threadDisplay",children:this.state.thread.map((function(t,i){return t.sender_id==e.getCookie("user_id")?Object(v.jsx)("div",{className:"message sent",children:Object(v.jsx)("p",{children:t.message})}):Object(v.jsxs)("div",{className:"message received",children:[Object(v.jsx)("img",{src:"/api/mediaObject/".concat(e.state.selectedThreadUserData.profile_pic_ref)}),Object(v.jsx)("p",{children:t.message})]})}))}),Object(v.jsxs)("div",{id:"inputDisplay",children:[Object(v.jsx)("textarea",{value:this.state.newMessage,onChange:function(t){e.setState({newMessage:t.target.value})},rows:16,cols:32}),Object(v.jsx)("button",{onClick:function(){e.sendMessage(e.state.thread_id)},children:"Send"})]})]})]})}}]),i}(n.a.Component),N=Object(u.b)((function(e){return{user:e.user,friends:e.friends,friendRequests:e.friendRequests,sentFriendRequests:e.sentFriendRequests}}),(function(e){return{UPDATE_FRIENDS:function(t){return e(function(e){return{type:"UPDATE_FRIENDS",value:e}}(t))},UPDATE_FRIEND_REQUESTS:function(t){return e(function(e){return{type:"UPDATE_FRIEND_REQUESTS",value:e}}(t))},UPDATE_SENT_FRIEND_REQUESTS:function(t){return e(function(e){return{type:"UPDATE_SENT_FRIEND_REQUESTS",value:e}}(t))}}}))(A),B=i(3),q=function(e){Object(l.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(r.a)(this,i),(s=t.call(this,e)).state={user:{},mediaObjects:[],profilePic:""},console.log(e),s.getMediaRefs=s.getMediaRefs.bind(Object(h.a)(s)),s}return Object(a.a)(i,[{key:"getCookie",value:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2];console.log("--could not find cookie---")}},{key:"componentDidMount",value:function(){this.getProfile(),this.getMediaRefs()}},{key:"getProfile",value:function(){var e=this;console.log("user not found in redux store, fetching..."),g.a.ajax({type:"GET",url:"/api/userByid",token:this.getCookie("token"),headers:{user_id:this.props.data.id},success:function(t){if(console.log(t),"EC.1"==t)console.log("no profile data found"),alert("User not found");else{e.setState({user:t});var i="/api/mediaObject/"+t.profile_pic_ref;e.setState({profilePic:i})}},error:function(e){console.log(e)}})}},{key:"getMediaRefs",value:function(){var e=this;g.a.ajax({type:"GET",url:"/api/allAccountMediaRefs",token:this.getCookie("token"),headers:{user_id:this.props.data.id},success:function(t){console.log(t),e.setState({mediaObjects:t})},error:function(e){console.log(e)}})}},{key:"render",value:function(){return Object(v.jsxs)("div",{id:"userpage",className:"foreGround primary",children:[Object(v.jsxs)("div",{id:"wakzakbak",children:[Object(v.jsxs)("div",{id:"accountUnchanging",children:[Object(v.jsx)("img",{src:this.state.profilePic}),Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:this.state.user.proper_name}),Object(v.jsx)("h3",{children:this.state.user.account_name}),Object(v.jsx)("h3",{children:this.state.user.age})]})]}),Object(v.jsxs)("div",{id:"displayMode",children:[Object(v.jsx)("h3",{children:this.state.user.bio}),Object(v.jsxs)("h3",{children:[Object(v.jsx)("b",{children:"Located near: "})," ",this.state.user.location]}),Object(v.jsxs)("h3",{children:[Object(v.jsx)("b",{children:"Occupation: "})," ",this.state.user.job]}),Object(v.jsxs)("h3",{children:[Object(v.jsx)("b",{children:"Education: "})," ",this.state.user.school]}),Object(v.jsx)("h3",{children:Object(v.jsx)("b",{children:"Sins: "})}),this.state.user.sin_weed?Object(v.jsx)("h4",{children:"That sticky icky icky"}):null,this.state.user.sin_alch?Object(v.jsx)("h4",{children:"Bottles *clink*"}):null,this.state.user.sin_nicc?Object(v.jsx)("h4",{children:"Ciggys *cringe*"}):null]})]}),Object(v.jsx)("div",{id:"mediaContainer",children:this.state.mediaObjects.map((function(e,t){var i="/api/mediaObject/"+e.ref;return Object(v.jsx)("div",{className:"mediaContainerCell",children:Object(v.jsx)("img",{src:i})})}))})]})}}]),i}(n.a.Component),L=function(e){var t=Object(B.f)();return console.log(t),Object(v.jsx)(q,{data:t})};function G(){return Object(v.jsxs)(B.c,{children:[Object(v.jsx)(B.a,{path:"/dashboard/account",children:Object(v.jsx)(S,{})}),Object(v.jsx)(B.a,{path:"/dashboard/accountsearch",children:Object(v.jsx)(E,{})}),Object(v.jsx)(B.a,{path:"/dashboard/firesides",children:Object(v.jsx)(R,{})}),Object(v.jsx)(B.a,{path:"/dashboard/host",children:Object(v.jsx)(U,{})}),Object(v.jsx)(B.a,{path:"/dashboard/messenger",children:Object(v.jsx)(N,{})}),Object(v.jsx)(B.a,{path:"/dashboard/user/:id",children:Object(v.jsx)(L,{})})]})}var H=i(34),V=function(e){Object(l.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(r.a)(this,i),(s=t.call(this,e)).state={},s}return Object(a.a)(i,[{key:"componentDidMount",value:function(){this.getProfile(),this.setActive()}},{key:"setActive",value:function(){var e=window.location.pathname;"/dashboard/firesides"==e&&g()("#mapButton").toggleClass("active"),"/dashboard/accountsearch"==e&&g()("#searchButton").toggleClass("active"),"/dashboard/host"==e&&g()("#hostButton").toggleClass("active"),"/dashboard/messenger"==e&&g()("#contactsButton").toggleClass("active"),"/dashboard/account"==e&&g()("#accountButton").toggleClass("active")}},{key:"getCookie",value:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2];console.log("--could not find cookie---")}},{key:"logout",value:function(){console.log("logout"),document.cookie="token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="user_id=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="fb_ID=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href="/"}},{key:"getProfile",value:function(){var e=this;""==this.props.user.account_name?(console.log("user not found in redux store, fetching..."),g.a.ajax({type:"GET",url:"/api/userByid",token:this.getCookie("token"),headers:{user_id:this.getCookie("user_id")},success:function(t){console.log(t),"EC.1"==t?(console.log("no profile data found"),e.setState({newUser:!0})):(e.setState({user_profile:t}),e.props.UPDATE_USER(t))},error:function(e){console.log(e)}})):console.log("user found in redux store")}},{key:"focus",value:function(e){g()(".active").toggleClass("active"),g()("#"+e.target.id).toggleClass("active")}},{key:"render",value:function(){var e=this;return Object(v.jsx)("header",{className:"accentTwo",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{id:"rightHeader",children:"Fireside"}),Object(v.jsxs)("div",{id:"centerHeader",children:[Object(v.jsx)(H.b,{name:"searchButton",id:"searchButton",to:"/dashboard/accountsearch",className:"fauxButton",children:Object(v.jsx)("button",{className:"headerButton",onClick:function(t){e.focus(t)},name:"searchButton",id:"searchButton",children:"Friend Search"})}),Object(v.jsx)(H.b,{name:"mapButton",id:"mapButton",to:"/dashboard/firesides",className:"fauxButton",children:Object(v.jsx)("button",{className:"headerButton",onClick:function(t){e.focus(t)},name:"mapButton",id:"mapButton",children:"Firesides"})}),Object(v.jsx)(H.b,{name:"hostButton",id:"hostButton",to:"/dashboard/host",className:"fauxButton",children:Object(v.jsx)("button",{className:"headerButton",onClick:function(t){e.focus(t)},name:"hostButton",id:"hostButton",children:"Host"})}),Object(v.jsx)(H.b,{name:"contactsButton",id:"contactsButton",to:"/dashboard/messenger",className:"fauxButton",children:Object(v.jsx)("button",{className:"headerButton",onClick:function(t){e.focus(t)},name:"contactsButton",id:"contactsButton",children:"Messenger"})}),Object(v.jsx)(H.b,{name:"accountButton",id:"accountButton",to:"/dashboard/account",className:"fauxButton",children:Object(v.jsx)("button",{className:"headerButton",onClick:function(t){e.focus(t)},name:"accountButton",id:"accountButton",children:"Account"})})]}),Object(v.jsxs)("div",{id:"leftHeader",children:[Object(v.jsx)("h4",{children:this.props.user.account_name}),Object(v.jsx)("button",{onClick:function(){e.logout()},children:"Logout"})]})]})})}}]),i}(n.a.Component),z=Object(u.b)((function(e){return{user:e.user}}),(function(e){return{UPDATE_USER:function(t){return e(y(t))}}}))(V),J=i(39),Q=(i(395),Object(J.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USER":var i=t.value;return i;default:return e}},userImages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USER_IMAGES":var i=t.value;return i;default:return e}},friends:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_FRIENDS":var i=t.value;return i;default:return e}},friendRequests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_FRIEND_REQUESTS":var i=t.value;return i;default:return e}},sentFriendRequests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SENT_FRIEND_REQUESTS":var i=t.value;return i;default:return e}},hostedFireside:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_HOSTED_FIRESIDE":var i=t.value;return i;default:return e}},firesides:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_FIRESIDES":var i=t.value;return i;default:return e}},firesideInvites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_FIRESIDE_INVITES":var i=t.value;return i;default:return e}},sentFiresideInvites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SENT_FIRESIDE_INVITES":var i=t.value;return i;default:return e}}})),K=i(171),W=Object(J.d)(Q,{user:{account_name:"",age:null,bio:"",id:null,job:"",location:"",proper_name:null,school:"",sin_alch:"",sin_nicc:"",sin_weed:""},userImages:[],friends:[],friendRequests:[],sentFriendRequests:[],hostedFireside:{fireside:{location_address:""}},firesides:[],firesideInvites:[],sentFiresideInvites:[]},Object(J.a)(K.a)),Z=function(e){Object(l.a)(i,e);var t=Object(d.a)(i);function i(){return Object(r.a)(this,i),t.call(this)}return Object(a.a)(i,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"App primary",children:Object(v.jsx)(u.a,{store:W,children:Object(v.jsx)(H.a,{children:Object(v.jsxs)("div",{children:[Object(v.jsx)(z,{}),Object(v.jsx)(G,{})]})})})})}}]),i}(n.a.Component),X=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,398)).then((function(t){var i=t.getCLS,s=t.getFID,n=t.getFCP,o=t.getLCP,c=t.getTTFB;i(e),s(e),n(e),o(e),c(e)}))};c.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(Z,{})}),document.getElementById("root")),X()}},[[397,1,2]]]);
//# sourceMappingURL=main.c7ed28d0.chunk.js.map